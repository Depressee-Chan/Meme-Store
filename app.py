from flask import Flask, request, url_for, redirect, render_template, json, jsonify
import random
import os
import sqlite3
import base64

cwd = str(os.path.dirname(os.path.realpath(__file__))) + "\\memeDB.db"

###START DB CREATION###
memeDB = sqlite3.connect(cwd)
memeCursor = memeDB.cursor()
memeCursor.execute('''CREATE TABLE IF NOT EXISTS Memes
        (ID                  INT PRIMARY KEY     NOT NULL,
        NAME                TEXT                NOT NULL,
        DATA                TEXT                NOT NULL);''')

#Inserts default image as first db entry
memeDB.execute("INSERT INTO Memes(ID,NAME,DATA) \ VALUES(?, ?, ?)", (1, "default", "data:image/jpeg;base64,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")
memeDB.commit()
memeDB.close()

###START PAGE ROUTING###
app = Flask(__name__) 

#INDEX PAGE ROUTE
@app.route('/', methods=['GET', 'POST'])
def index():
        memeDB = sqlite3.connect(cwd)
        memeCursor = memeDB.cursor()
        memeCursor.execute("select * from Memes")
        Id = str(random.randint(1, (len(memeCursor.fetchall()))))
        statement = "select DATA from Memes where ID=" + Id
        source0 = memeCursor.execute(statement)
        source = str(memeCursor.fetchall())
        source = source.strip("[]()\'")
        source = source[:-2]
        memeDB.commit()
        memeDB.close()
        #displays index page with random meme from db
        return render_template('index.html', source = source)

#GET MEME ROUTE
@app.route('/getMeme', methods=['GET'])
def getMeme():
        #redirects to index page
        return redirect(url_for('index'))

###DATABASE OPERATORS###

#ADD MEME ROUTE
@app.route('/addMeme', methods=['POST'])
def addMeme():
        memeDB = sqlite3.connect(cwd)
        memeCursor = memeDB.cursor()
        memeCursor.execute("select * from Memes")

        data = request.form["source"]
        Id = len(memeCursor.fetchall()) + 1
        name = request.form["name"]

        memeDB.execute("INSERT INTO Memes(ID,NAME,DATA) \
            VALUES(?, ?, ?)", (Id, name, data))
        memeDB.commit()
        memeDB.close()
        #adds meme && returns to index page
        return redirect(url_for('index'))

###START SERVER###
if __name__ == "__main__":
    app.run(debug=True, host='0.0.0.0', port=80)
